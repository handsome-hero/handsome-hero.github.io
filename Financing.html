<!--4.Financing_Loan_Rate_Setup-->
<!--    Type VARCHAR(100),-->
<!--    Size VARCHAR(100),-->
<!--    Use_Purpose VARCHAR(100),-->
<!--    Powertrain VARCHAR(100),-->
<!--    Fuel_Type VARCHAR(100),-->
<!--    Model_Year varchar(100),-->

<!doctype html>
<html class="no-js" lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <title>Ramble // HTML Template</title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Place favicon.ico in the root directory -->
    <link rel="shortcut icon" type="image/x-icon" href="images/favicon.ico">
    <link rel="apple-touch-icon" href="apple-touch-icon.png">

    <!-- All css files are included here. -->
    <!-- Bootstrap framework main css -->
    <link rel="stylesheet" href="css/bootstrap.min.css">
    <!-- This core.css file contents all plugins css file. -->
    <link rel="stylesheet" href="css/core.css">
    <!-- Template shortcodes/elements style -->
    <link rel="stylesheet" href="css/shortcode/shortcodes.css">
    <!-- Template main style -->
    <link rel="stylesheet" href="style.css">
    <!-- Responsive css -->
    <link rel="stylesheet" href="css/responsive.css">
    <!-- User style -->
    <link rel="stylesheet" href="css/custom.css">
    <link rel="stylesheet" href="newstyle.css">
    <!-- Modernizr JS -->
    <script src="js/vendor/modernizr-2.8.3.min.js"></script>

    <!-- Custom style for background image and text -->
    <!-- Custom style for background image and text -->
    <style>
        .slider__inner::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(rgba(0, 0, 0, 0.4), rgba(0, 0, 0, 1.5)), url('images/bg/2.jpg') center/cover no-repeat;
            z-index: -1;
        }
        .steps {
            background-color: rgba(0, 0, 0, 0);
            color: white;
            padding: 10px;
            text-align: center;
            margin-bottom: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        .step {
            display: block;
            width: 20%;
            padding: 10px;
            margin-bottom: 10px;
            background-color: gray;
            border-radius: 10px;
            cursor: pointer;
            text-align: center;
        }

        .current-step {
            background-color: green;
            font-weight: bold;
        }


    </style>

</head>

<body>
    <!--[if lt IE 8]>
        <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</p>
    <![endif]-->

    <!-- Body main wrapper start -->
    <div class="wrapper fixed-newslatter">
        <!-- Start Header Style -->
        <header id="header" class="header">
            <div id="sticky-header-with-topbar" class="container-fluid hidden-xs sticky__header">
                <div class="row">
                    <div class="col-md-2 col-lg-2 col-sm-12">
                        <div class="logo">
                            <a href="index.html"><img src="images/logo/ramble.png" alt="logo"></a>
                        </div>
                    </div>
                    <div class="col-md-8 col-sm-12 col-lg-8">
                        <div class="header__bottom">
                            <div class="mainmenu__area">
                                <nav class="mainmenu__nav">
                                    <ul class="main__menu">
                                        <li><a href="index.html">Home</a></li>
                                        <li><a href="about-us.html">About</a></li>
                                    </ul>
                                </nav>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </header>
        <!-- End Header Style -->
        <div class="slider__inner">
            <h2 class="wow">Please set your Financing Loan Rate</h2>
            <div class="steps">
                <div class="step" onclick="location.href='index.html'">Step 1: General Information</div>

                <div class="step" onclick="location.href='Energy_Factor_Value.html '">Step 2:Energy Factor Value </div>
                <div class="step" onclick="location.href='electric.html'">Step 3: Electric Driving Range</div>
                <div class="step current-step" onclick="location.href='Financing.html'">Step 4: Financing Loan Rate</div>
                <div class="step" onclick="location.href='Government.html'">Step 5: Government Subsidies</div>
                <div class="step" onclick="location.href='Vehicle.html'">Step 6: Vehicle Purchase Price</div>
                <div class="step" onclick="location.href='Condition.html'">Step 7: Condition Trend</div>
            </div>
        </div>
        <div class="select__option__wrap">
            <div class="container">
                <div class="row">
                    <div class="col-md-12 col-lg-12 col-sm-12 col-xs-12">
                        <form id="financingForm" action="1.php" method="POST">
                            <div class="select__option__inner">
                                <div class="single__option">
                                    <label for="financing_loan_rate_setup">Financing_Loan_Rate_Setup:</label>
                                    <select id="financing_loan_rate_setup" name="financing_loan_rate_setup" required onchange="toggleCustomizedInput()">
                                        <option value = "Default">Default</option>
                                        <option value = "No Loan">No Loan</option>
                                        <option value = "Customized">Customized</option>
                                    </select>
                                </div>
                                <div class="single__option">
                                    <input type="text" id="customizedLoanRateInput" name="customized_loan_rate_input" placeholder="Customized Loan Rate Input" value = "0.04" required readonly>
                                </div>
                                <div class="single__option">
                                    <input type="text" id="customizedDownpaymentRatioInput" name="customized_downpayment_ratio_input" placeholder="Customized Downpayment Ratio Input" value="0.3" required readonly>
                                </div>
                                <div class="single__option">
                                    <button type="submit" class="btn__search" onclick="handleFormSubmit(event, 'financing')">Next</button>
                                </div>
                                <input type="hidden" name="form_type" value="financing">
                                <input type="hidden" id="type" name="type">
                                <input type="hidden" id="size" name="size">
                                <input type="hidden" id="use_purpose" name="use_purpose">
                                <input type="hidden" id="powertrain" name="powertrain">
                                <input type="hidden" id="fuel_type" name="fuel_type">
                                <input type="hidden" id="model_year" name="model_year">
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', (event) => {
            const formData = JSON.parse(sessionStorage.getItem('formData'));
            if (formData) {
                document.getElementById('type').value = formData.type;
                document.getElementById('size').value = formData.size;
                document.getElementById('use_purpose').value = formData.use_purpose;
                document.getElementById('powertrain').value = formData.powertrain;
                document.getElementById('fuel_type').value = formData.fuel_type;
                document.getElementById('model_year').value = formData.model_year;
            }
        });
        
        function toggleCustomizedInput() {
            // 获取下拉框的值
            const financing = document.getElementById("financing_loan_rate_setup");
            const customizedLoanRateInput = document.getElementById("customizedLoanRateInput");
            const customizedDownpaymentRatioInput = document.getElementById("customizedDownpaymentRatioInput");
            // 如果选择的是Customized，则允许编辑；否则设为只读
            if (financing.value === "Customized") {
                customizedLoanRateInput.style.display = 'block';
                customizedDownpaymentRatioInput.style.display = 'block';
                customizedLoanRateInput.readOnly = false; // 允许编辑
                customizedLoanRateInput.value = ""; // 可以清空输入框
                customizedDownpaymentRatioInput.readOnly = false;
                customizedDownpaymentRatioInput.value = "";
            } else if(financing.value == "Default") {
                customizedLoanRateInput.style.display = 'block';
                customizedDownpaymentRatioInput.style.display = 'block';
                customizedLoanRateInput.readOnly = true; // 允许编辑
                customizedLoanRateInput.value = "0.04"; // 可以清空输入框
                customizedDownpaymentRatioInput.readOnly = true;
                customizedDownpaymentRatioInput.value = "0.3"; // 恢复默认值
            } else {
                customizedLoanRateInput.style.display = 'none';
                customizedDownpaymentRatioInput.style.display = 'none';
            }
        }

        function handleFormSubmit(event, formType) {
            event.preventDefault();

            const form = document.getElementById('financingForm');
            const formData = new FormData(form);
            formData.append('form_type', formType);

            for (let [key, value] of formData.entries()) {
                console.log(`${key}: ${value}`);
            }

            fetch('1.php', {
                method: 'POST',
                body: formData
            })
            .then(response => response.text())
            .then(data => {
                console.log('Server Response:', data);
                window.location.href = 'Government.html';
            })
            .catch(error => console.error('Error:', error));
        }
    </script>
</body>

</html>